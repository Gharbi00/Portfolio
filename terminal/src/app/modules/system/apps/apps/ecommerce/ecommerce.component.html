<ng-container *ngIf="!(navigating$ | async)">
  <div class="position-relative mx-n4 mt-n4">
    <div class="profile-wid-bg profile-setting-img">
      <img src="assets/images/profile-bg.jpg" class="profile-wid-img" alt="">
      <div class="overlay-content">
        <div class="text-end p-3">
          <div class="p-0 ms-auto rounded-circle profile-photo-edit">
            <input id="profile-foreground-img-file-input" type="file" class="profile-foreground-img-file-input">
          </div>
        </div>
      </div>
    </div>
  </div>
  <div class="row">
    <div class="col-xxl-3">
      <div class="card mt-n5">
        <div class="card-body p-4">
          <div *ngIf="plugin$ | async as plugin" class="text-center">
            <div class="profile-user position-relative d-inline-block mx-auto mb-4">
              <div class="avatar-lg mb-3">
                <div class="avatar-title bg-soft-success fs-24 text-success">
                  <i [ngClass]="plugin?.icon"></i>
                </div>
              </div>
            </div>
            <h5 class="fs-16 mb-1">{{plugin?.name}}</h5>
            <p class="text-muted mb-0">{{plugin?.description}}</p>
          </div>
        </div>
      </div>
    </div>
    <div class="col-xxl-9">
      <div class="card mt-xxl-n5">
        <div class="card-header">
          <ul ngbNav #customNav="ngbNav" [activeId]="1" class="nav nav-tabs-custom border-bottom-0" role="tablist">
            <li [ngbNavItem]="1" class="nav-item">
              <a ngbNavLink class="nav-link" data-bs-toggle="tab" role="tab">
                Pickup
              </a>
              <ng-template ngbNavContent>
                <div class="card">
                  <div class="card-body">
                    <div class="col-lg-12 row">
                      <div class="col-4 mb-3 d-flex align-items-center">
                        <input [(ngModel)]="orderSettings.pickup" [ngModelOptions]="{ standalone: true }"
                          (ngModelChange)="updateField({ pickup: $event })" class="form-check-input me-3"
                          type="checkbox">
                        <label class="form-check-label mt-1" for="anna-adame">
                          Pickup
                        </label>
                      </div>
                      <div class="col-lg-4 mb-3">
                        <div class="input-group">
                          <label for="email_id-field" class="align-items-center d-flex form-label me-2">{{'MODULES.COLLABORATION.MAIN.START_TIME' | translate }}</label>
                          <input class="form-control" matInput name="pickup time start" format="24"
                            [(ngModel)]="orderSettings.pickupTime.from" [ngModelOptions]="{standalone: true}"
                            [ngxMatTimepicker]="pickerDTFrom"
                            (ngModelChange)="updateField({ pickupTime: { from: $event } })" placeholder="00:00"
                            readonly />
                          <div (click)="pickerDTFrom.open()" class="input-group-append cursor-pointer">
                            <span class="input-group-text"><i class="ri-time-fill"></i></span>
                          </div>
                        </div>
                        <ngx-mat-timepicker #pickerDTFrom></ngx-mat-timepicker>
                      </div>
                      <div class="col-lg-4 mb-3">
                        <div class="input-group">
                          <label for="email_id-field"
                            class="align-items-center d-flex form-label me-2">{{'MODULES.COLLABORATION.MAIN.END_TIME' |
                            translate }}</label>
                          <input class="form-control" matInput name="pickup time end" format="24"
                            [(ngModel)]="orderSettings.pickupTime.to" [ngModelOptions]="{standalone: true}"
                            (ngModelChange)="updateField({ pickupTime: { to: $event } })"
                            [ngxMatTimepicker]="pickerDTTo" placeholder="00:00" readonly />
                          <div (click)="pickerDTFrom.open()" class="input-group-append">
                            <span class="input-group-text"><i class="ri-time-fill"></i></span>
                          </div>
                        </div>
                        <ngx-mat-timepicker #pickerDTTo></ngx-mat-timepicker>
                      </div>
                    </div>
                  </div>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="2" class="nav-item">
              <a ngbNavLink class="nav-link" data-bs-toggle="tab" role="tab">{{'SHARED.DELIVERY' | translate }}
              </a>
              <ng-template ngbNavContent>
                <div class="card">
                  <div class="card-body">
                    <div class="col-lg-12 row">
                      <div class="col-4 mb-3 d-flex align-items-center">
                        <input [(ngModel)]="orderSettings.delivery" [ngModelOptions]="{ standalone: true }"
                          (ngModelChange)="updateField({ delivery: $event })" class="form-check-input me-3"
                          type="checkbox">
                        <label class="form-check-label mt-1" for="anna-adame">
                          {{'SHARED.DELIVERY' | translate }}
                        </label>
                      </div>
                      <div class="col-lg-4 mb-3">
                        <div class="input-group">
                          <label for="email_id-field" class="align-items-center d-flex form-label me-2">{{'MODULES.COLLABORATION.MAIN.START_TIME' | translate }}</label>
                          <input class="form-control" matInput name="delivery time start" format="24"
                            [(ngModel)]="orderSettings.deliveryTime.from" [ngModelOptions]="{standalone: true}"
                            [ngxMatTimepicker]="pickerDTFrom"
                            (ngModelChange)="updateField({ deliveryTime: { from: $event } })" placeholder="00:00"
                            readonly />
                          <div (click)="pickerDTFrom.open()" class="input-group-append cursor-pointer">
                            <span class="input-group-text"><i class="ri-time-fill"></i></span>
                          </div>
                        </div>
                        <ngx-mat-timepicker #pickerDTFrom></ngx-mat-timepicker>
                      </div>
                      <div class="col-lg-4 mb-3">
                        <div class="input-group">
                          <label for="email_id-field"
                            class="align-items-center d-flex form-label me-2">{{'MODULES.COLLABORATION.MAIN.END_TIME' |
                            translate }}</label>
                          <input class="form-control" matInput name="delivery time end" format="24"
                            [(ngModel)]="orderSettings.deliveryTime.to" [ngModelOptions]="{standalone: true}"
                            (ngModelChange)="updateField({ deliveryTime: { to: $event } })"
                            [ngxMatTimepicker]="pickerDTTo" placeholder="00:00" readonly />
                          <div (click)="pickerDTFrom.open()" class="input-group-append cursor-pointer">
                            <span class="input-group-text"><i class="ri-time-fill"></i></span>
                          </div>
                        </div>
                      </div>
                      <div>
                        <edit-zones *ngIf="orderSettings && pos" [pos]="pos"></edit-zones>
                      </div>
                      <ngx-mat-timepicker #pickerDTTo></ngx-mat-timepicker>
                    </div>
                  </div>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="3" class="nav-item">
              <a ngbNavLink class="nav-link" data-bs-toggle="tab" role="tab">
                Locations
              </a>
              <ng-template ngbNavContent>
                <div class="card">
                  <div class="card-body">
                    <form [formGroup]="orderForm">
                      <div formArrayName="countryArray" class="col-lg-12 row">
                        <ng-container
                          *ngFor="let key of countryArray?.controls; let i = index; let first = first; let last = last;">
                          <ng-container [formGroupName]="i">
                            <div class="col-sm-6">
                              <div class="mb-3">
                                <label for="choices-status-input" class="form-label">{{'COMMON.COUNTRY' | translate
                                  }}</label>
                                <ng-select [typeahead]="countrySearchInput$" (change)="onChangeCountry($event, i)"
                                  [searchable]="true" [hideSelected]="true"
                                  placeholder="{{'PLACEHOLDER.ENTER_YOUR_COUNTRY' | translate }}" [items]="countries"
                                  [multiple]="false" formControlName="country">
                                  <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                    <span class="me-1" *ngIf="item?.iconFlag">{{item?.iconFlag}}</span>
                                    <span class="ng-value-label">{{item?.name?.split('_').join(' ') | titlecase}}</span>
                                    <span class="ng-value-icon right" (click)="clear(item)" aria-hidden="true">×</span>
                                  </ng-template>
                                  <ng-template ng-option-tmp let-item="item">
                                    <span class="me-1" *ngIf="item?.iconFlag">{{item?.iconFlag}}</span>
                                    <span>{{item?.name?.split('_').join(' ') | titlecase}}</span>
                                  </ng-template>
                                </ng-select>
                              </div>
                            </div>
                            <div class="col-sm-6">
                              <div class="mb-3">
                                <label for="choices-status-input" class="form-label">{{ 'COMMON.STATES' | translate
                                  }}</label>
                                <div class="d-flex gap-1">
                                  <ng-select [typeahead]="stateSearchInput$" (click)="onChangeState(i)"
                                    [selectableGroup]="true" [searchable]="true" class="col-12" formControlName="state"
                                    [items]="states" [multiple]="true" [hideSelected]="true" [closeOnSelect]="false"
                                    placeholder="{{'PLACEHOLDER.ENTER_STATE' | translate }}">
                                    <ng-template ng-label-tmp let-item="item" let-clear="clear">
                                      <span class="ng-value-label">{{item?.name?.split('_').join(' ') |
                                        titlecase}}</span>
                                      <span class="ng-value-icon right" (click)="clear(item)"
                                        aria-hidden="true">×</span>
                                    </ng-template>
                                    <ng-template ng-option-tmp let-item="item">
                                      <span>{{item?.name?.split('_').join(' ') | titlecase}}</span>
                                    </ng-template>
                                  </ng-select>
                                  <button (click)="removeField(i)" *ngIf="!first" class="btn btn-sm btn-soft-danger">
                                    <i class="ri-delete-bin-fill fs-16"></i>
                                  </button>
                                </div>
                              </div>
                            </div>
                          </ng-container>
                        </ng-container>
                      </div>
                      <div class="d-flex justify-content-end">
                        <button (click)="addField()" type="button" class="btn btn-soft-info btn-sm shadow-none"><i
                            class="ri-add-fill me-1 align-bottom"></i>
                          Add Location</button>
                      </div>
                    </form>
                    <div class="d-flex justify-content-end mt-3">
                      <button [disabled]="isLocationButtonDisabled || orderForm.get('countryArray').invalid"
                        (click)="save()" class="btn btn-success">{{'COMMON.SAVE' | translate }}</button>
                    </div>
                  </div>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="4" class="nav-item">
              <a ngbNavLink class="nav-link" data-bs-toggle="tab" role="tab">
                Extra fees
              </a>
              <ng-template ngbNavContent>
                <form [formGroup]="orderForm">
                  <div formArrayName="extraFees" class="col-lg-12 row">
                    <ng-container
                      *ngFor="let key of extraFees?.controls; let i = index; let first = first; let last = last;">
                      <ng-container [formGroupName]="i">
                        <div class="col-lg-6 mb-3">
                          <label class="form-label" for="project-title-input">Fees Title</label>
                          <input [formControlName]="'key'" type="text" class="form-control" id="project-title-input"
                            placeholder="{{'PLACEHOLDER.ENTER_FEES_TITLE' | translate }}">
                        </div>
                        <div class="col-lg-6 mb-3">
                          <label class="form-label" for="project-title-input">Fees Value</label>
                          <div class="d-flex gap-1">
                            <input class="col-12" [formControlName]="'value'" type="text" class="form-control"
                              id="project-title-input" placeholder="{{'PLACEHOLDER.ENTER_FEES_VALUE' | translate }}">
                            <button (click)="removeFeesField(i)" *ngIf="!first" class="btn btn-sm btn-soft-danger">
                              <i class="ri-delete-bin-fill fs-16"></i>
                            </button>
                          </div>
                        </div>
                      </ng-container>
                    </ng-container>
                  </div>
                  <div class="d-flex justify-content-end">
                    <button (click)="addFeesField()" type="button" class="btn btn-soft-info btn-sm shadow-none"><i
                        class="ri-add-fill me-1 align-bottom"></i>
                      Add Extra Fees</button>
                  </div>
                </form>
                <div class="d-flex justify-content-end mt-3">
                  <button [disabled]="isFeesButtonDisabled || orderForm.get('extraFees').invalid"
                    (click)="saveExtraFees()" class="btn btn-success">{{'COMMON.SAVE' | translate }}</button>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="5" class="nav-item">
              <a ngbNavLink class="nav-link" data-bs-toggle="tab" role="tab">
                <i class="far fa-envelope"></i>
                Email
              </a>
              <ng-template ngbNavContent>
                <ng-container
                  *ngIf="((loadingEmails$ | async) === false || null || undefined) && (emails$ | async)?.length">
                  <div *ngIf="(emails$ | async)?.length" class="card d-flex flex-column flex-root" id="kt_app_root">
                    <div class="d-flex card-body flex-column flex-column-fluid">
                      <div
                        class="d-flex flex-column-auto justify-content-center align-items-start gap-2 gap-lg-4 py-4 px-10 overflow-auto"
                        id="kt_app_header_nav">
                        <ul
                          class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 d-flex fw-bold">
                          <li (click)="selectTemplate(email)" *ngFor="let email of emails; let i = index"
                            class="nav-item mt-2">
                            <a [ngClass]="{'active bg-light border border-2': selectedEmail?.id === email?.id}"
                              class="btn btn-icon flex-column btn-text-gray-500 btn-icon-gray-300 btn-active-text-gray-700 btn-active-icon-gray-500 rounded-3 h-90px w-90px fw-semibold">
                              <i [ngClass]="{
                                'ri-file-3-fill': email?.name === 'ARTICLE_CONFIRMED',
                                'ri-file-list-3-fill': email?.name === 'ARTICLE_DELIVERED',
                                'ri-newspaper-line': email?.name === 'ARTICLE_READY_FOR_PICKUP',
                                'ri-file-paper-2-line': email?.name === 'ARTICLE_CANCELED',
                                'ri-file-fill': email?.name === 'INVOICE'
                                }" [ngStyle]="{
                                  'color':
                                  email?.name === 'ARTICLE_CONFIRMED' ? '#FFDA33' :
                                  email?.name === 'ARTICLE_DELIVERED' ? '#FFDA33' :
                                  email?.name === 'ARTICLE_READY_FOR_PICKUP' ? '#FFDA33' :
                                  email?.name === 'ARTICLE_CANCELED' ? '#FFDA33' :
                                  email?.name === 'INVOICE' ? '#337AFF' : ''
                                }" class="fs-3"></i>
                              <span class="fs-8 text-muted fw-bold">
                                {{
                                email?.name === 'INVOICE' ? 'Invoice' :
                                email?.name === 'ARTICLE_DELIVERED' ? 'Article Delivered' :
                                email?.name === 'ARTICLE_READY_FOR_PICKUP' ? 'Article Ready for Pickup' :
                                email?.name === 'ARTICLE_CANCELED' ? 'Article Canceled' :
                                email?.name === 'ARTICLE_CONFIRMED' ? 'Article Confirmed' :
                                ''
                                }}
                              </span>
                            </a>
                          </li>
                          <li (click)="openEmailModal(emailModal, null)" class="nav-item mt-2">
                            <a [ngClass]="{'active bg-light border border-2': selectedEmail?.id === email?.id}"
                              class="btn btn-icon max-h-105px flex-column btn-text-gray-500 btn-icon-gray-300 btn-active-text-gray-700 btn-active-icon-gray-500 rounded-3 h-60px w-90px h-90px fw-semibold">
                              <i class="ri-add-line fs-3 text-muted"></i>
                              <span class="fs-8 text-muted fw-bold">
                                Create Email Template
                              </span>
                            </a>
                          </li>
                        </ul>
                      </div>
                    </div>
                  </div>
                  <div class="tab-content" id="myTabContent">
                    <div class="d-flex justify-content-end align-items-center gap-2 me-4">
                      <div class="form-check form-switch form-switch-right form-switch-md">
                        <label for="navbarscrollspy-showcode" class="form-label text-muted">{{'MODULES.SYSTEM.SHOW_CODE'
                          | translate }}</label>
                        <input [checked]="false" class="form-check-input code-switcher" type="checkbox"
                          id="navbarscrollspy-showcode" (change)="onShowCode($event?.target?.checked)">
                      </div>
                      <button (click)="openDeleteModal(deleteModel, selectedEmail)"
                        class="btn btn-danger">{{'COMMON.DELETE' | translate }}
                      </button>
                    </div>
                    <div *ngIf="!isVisibleCode" [innerHTML]="sanitizedHtml"></div>

                    <div *ngIf="isVisibleCode" class="d-flex justify-content-center">
                      <form [formGroup]="emailForm">
                        <div class="card w-600">
                          <div class="card-body">
                            <div class="live-preview">
                              <div class="p-4 row">
                                <textarea formControlName="content" class="form-control" id="exampleFormControlTextarea"
                                  placeholder="{{'PLACEHOLDER.ENTER_YOUR_DESCRIPTION' | translate }}"
                                  rows="20">{{this?.htmlText}}</textarea>
                              </div>
                            </div>
                            <div class="hstack gap-2 justify-content-end mt-3">
                              <button [disabled]="isEmailButtonDisabled || emailForm.invalid" type="button"
                                class="btn btn-primary" (click)="saveEmail()">{{selectedEmail ? 'Edit' :
                                'Create'}}</button>
                            </div>
                          </div>
                        </div>
                      </form>
                    </div>
                  </div>
                </ng-container>
                <div *ngIf="!(emails$ | async).length" class="d-flex justify-content-center">
                  <ul class="nav nav-stretch nav-line-tabs nav-line-tabs-2x border-transparent fs-5 d-flex fw-bold">
                    <li (click)="openEmailModal(emailModal, null)" class="nav-item mt-2">
                      <a [ngClass]="{'active bg-light border border-2': selectedEmail?.id === email?.id}"
                        class="btn btn-icon max-h-105px flex-column btn-text-gray-500 btn-icon-gray-300 btn-active-text-gray-700 btn-active-icon-gray-500 rounded-3 h-60px w-90px h-90px fw-semibold">
                        <i class="ri-add-line fs-3 text-muted"></i>
                        <span class="fs-8 text-muted fw-bold">
                          Create Email Template
                        </span>
                      </a>
                    </li>
                  </ul>
                </div>

                <div id="noresult" class="py-4 mt-4 text-center"
                  *ngIf="(loadingEmails$ | async) || (!(loadingEmails$ | async) && !(emails$ | async).length)">
                  <div *ngIf="loadingEmails$ | async">
                    <lord-icon trigger="loop" style="width:72px;height:72px"
                      [colors]="'primary:' + primaryColor + ',secondary:' + secondaryColor"
                      src="https://cdn.lordicon.com/msoeawqm.json">
                    </lord-icon>
                    <h5 class="mt-4">{{'COMMON.LOADING' | translate }}</h5>
                  </div>
                  <div *ngIf="!(loadingEmails$ | async) && !(emails$ | async).length">
                    <lord-icon trigger="loop" style="width:72px;height:72px"
                      [colors]="'primary:' + primaryColor + ',secondary:' + secondaryColor"
                      src="https://cdn.lordicon.com/vlycxjwx.json">
                    </lord-icon>
                    <h5 class="mt-4">{{ 'COMMON.NO_RESULT' | translate }}</h5>
                  </div>
                </div>

                <ng-template #emailModal role="document" let-modal>
                  <div class="modal-body">
                    <form [formGroup]="emailForm">
                      <div class="mb-3">
                        <label for="name" class="col-sm-4 col-form-label">{{'COMMON.NAME' | translate }}</label>
                        <ng-select required [selectableGroup]="true" [closeOnSelect]="true"
                          placeholder="{{'PLACEHOLDER.ENTER_NAME' | translate }}" formControlName="name"
                          [multiple]="false" [items]="filteredEmailNames" [clearable]="false">
                          <ng-template ng-label-tmp let-item="item" let-clear="clear">
                            <div class="ng-value-label">
                              {{
                              item === 'INVOICE' ? 'Invoice' :
                              item === 'ARTICLE_DELIVERED' ? 'Article Delivered' :
                              item === 'ARTICLE_READY_FOR_PICKUP' ? 'Article Ready for Pickup' :
                              item === 'ARTICLE_CANCELED' ? 'Article Canceled' :
                              item === 'ARTICLE_CONFIRMED' ? 'Article Confirmed' :
                              ''
                              }}
                            </div>
                          </ng-template>
                          <ng-template ng-option-tmp let-item$="item$" let-item="item">
                            {{
                              item === 'INVOICE' ? 'MODULES.SYSTEM.SHARED.INVOICE' :
                            item === 'ARTICLE_DELIVERED' ? 'Article Delivered' :
                            item === 'ARTICLE_READY_FOR_PICKUP' ? 'Article Ready for Pickup' :
                            item === 'ARTICLE_CANCELED' ? 'Article Canceled' :
                            item === 'ARTICLE_CONFIRMED' ? 'Article Confirmed' :
                            ''
                            }}
                          </ng-template>
                        </ng-select>
                      </div>
                      <div class="mb-3">
                        <label for="name" class="col-sm-4 col-form-label">{{'MODULES.INVENTORY.CONTENT' | translate
                          }}</label>
                        <textarea class="form-control" id="checkout-mess" cols="30" rows="10" formControlName="content"
                          placeholder="{{'PLACEHOLDER.ENTER_CONTENT' | translate }}"></textarea>
                      </div>
                      <div class="hstack gap-2 justify-content-end mt-8">
                        <button type="button" class="btn btn-light" data-bs-dismiss="modal"
                          (click)="modal.close('close click')">{{'COMMON.CLOSE' | translate }}</button>
                        <button [disabled]="isEmailButtonDisabled || emailForm.invalid" type="button"
                          class="btn btn-primary" (click)="saveEmail()">{{selectedEmail ? 'Edit' : 'Create'}}</button>
                      </div>
                    </form>
                  </div>
                </ng-template>

                <ng-template #deleteModel let-modal>
                  <div class="modal-content">
                    <div class="modal-header">
                      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="btn-close"
                        (click)="modal.dismiss('Cross click')"></button>
                    </div>
                    <div class="modal-body">
                      <div class="mt-2 text-center">
                        <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop"
                          colors="primary:#f7b84b,secondary:#f06548" style="width:100px;height:100px"></lord-icon>
                        <div class="mt-4 pt-2 fs-15 mx-4 mx-sm-5">
                          <h4>{{'COMMON.ARE_YOU_SURE' | translate }}</h4>
                          <p class="text-muted mx-4 mb-0">{{'MODULES.SYSTEM.REMOVE_EMAIL_TEMPLATE' | translate }}</p>
                        </div>
                      </div>
                      <div class="d-flex gap-2 justify-content-center mt-4 mb-2">
                        <button type="button" class="btn w-sm btn-light" data-bs-dismiss="modal"
                          (click)="modal.close('Close click')">{{'COMMON.CLOSE' | translate }}</button>
                        <button type="button" class="btn w-sm btn-danger" id="delete-product"
                          (click)="deleteCorporateEmailTemplate()">Yes, Delete
                          It!</button>
                      </div>
                    </div>
                  </div>
                </ng-template>
              </ng-template>
            </li>
            <li [ngbNavItem]="6" class="nav-item">
              <a ngbNavLink class="nav-link" data-bs-toggle="tab" role="tab">
                <i class="far fa-envelope"></i>
                SMS
              </a>
              <ng-template ngbNavContent>
                <ng-container
                  *ngIf="((loadingSmsIntegration$ | async) === false || null || undefined) && (smsIntegration$ | async)">
                  <div *ngIf="(smsIntegration$ | async)" class="card d-flex flex-column flex-root" id="kt_app_root">
                    <div class="d-flex card-body flex-column flex-column-fluid">
                      <form *ngIf="integrationForm" [formGroup]="integrationForm">
                        <ng-container *ngIf="currentLanguage?.name === 'Default'" formArrayName="actions">
                          <ng-container *ngFor="let action of actions['controls']; let i=index; let last = last"
                            [formGroupName]="i">
                            <div class="row align-items-center">
                              <div class="col-lg-5 mb-3">
                                <input readonly formControlName="definition" type="text" class="form-control"
                                  id="firstnamefloatingInput"
                                  placeholder="{{'PLACEHOLDER.ENTER_CONTENT' | translate }}">
                              </div>
                              <div class="col-lg-5 mb-3">
                                <div class="form-label">
                                  <input formControlName="content" type="text" class="form-control"
                                    id="firstnamefloatingInput"
                                    placeholder="{{'PLACEHOLDER.ENTER_CONTENT' | translate }}">
                                </div>
                              </div>
                              <div class="col-lg-2 mb-3 flex-shrink-0 d-flex fs-18 gap-1">
                                <div class="form-check form-switch">
                                  <input formControlName="enabled" class="form-check-input" type="checkbox"
                                    role="switch" id="flexSwitchCheckDefault">
                                </div>
                              </div>
                            </div>
                          </ng-container>
                        </ng-container>

                        <!-- <ng-container *ngIf="currentLanguage?.name !== 'Default'" formArrayName="actions">
                          <ng-container *ngFor="let action of actions['controls']; let i=index; let last = last"
                            [formGroupName]="i">
                            <div class="row">
                              <div class="col-lg-5 mb-3">
                                <label for="email_id-field" class="form-label">Definition</label>
                                <input readonly formControlName="definition" type="text" class="form-control"
                                    id="firstnamefloatingInput" placeholder="{{'PLACEHOLDER.ENTER_DEFINITION' | translate }}">
                              </div>
                              <div formGroupName="translation" class="col-lg-5 mb-3l">
                                <label class="form-label" for="firstnamefloatingInput">{{'MODULES.INVENTORY.CONTENT' | translate }}</label>
                                <input formControlName="content" type="text" class="form-control"
                                  id="firstnamefloatingInput" placeholder="{{'PLACEHOLDER.ENTER_CONTENT' | translate }}">
                              </div>
                            </div>
                          </ng-container>
                        </ng-container> -->
                        <div class="d-flex justify-content-end">
                          <button [disabled]="integrationForm.invalid || isSmsButtonDisabled"
                            (click)="saveIntegration()" class="btn btn-success">{{'COMMON.SAVE' | translate }}</button>
                        </div>
                      </form>
                    </div>
                  </div>
                </ng-container>
                <div id="noresult" class="py-4 mt-4 text-center"
                  *ngIf="(loadingSmsIntegration$ | async) || (!(loadingSmsIntegration$ | async) && !(smsIntegration$ | async))">
                  <div *ngIf="loadingSmsIntegration$ | async">
                    <lord-icon trigger="loop" style="width:72px;height:72px"
                      [colors]="'primary:' + primaryColor + ',secondary:' + secondaryColor"
                      src="https://cdn.lordicon.com/msoeawqm.json">
                    </lord-icon>
                    <h5 class="mt-4">{{'COMMON.LOADING' | translate }}</h5>
                  </div>
                  <div *ngIf="!(loadingSmsIntegration$ | async) && !(smsIntegration$ | async)">
                    <lord-icon trigger="loop" style="width:72px;height:72px"
                      [colors]="'primary:' + primaryColor + ',secondary:' + secondaryColor"
                      src="https://cdn.lordicon.com/vlycxjwx.json">
                    </lord-icon>
                    <h5 class="mt-4">{{ 'COMMON.NO_RESULT' | translate }}</h5>
                  </div>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="7" class="nav-item">
              <a ngbNavLink class="nav-link" data-bs-toggle="tab" role="tab">
                <i class="far fa-envelope"></i>Marketplace
              </a>
              <ng-template ngbNavContent>
                <div class="card">
                  <div class="card-header mb-4">
                    <div class="d-flex align-items-center justify-content-between">
                      <div class="align-items-center d-flex gap-4">
                        <label class="col-xxl-3 form-label">{{'SHARED.IDENTIFIER' | translate }}:</label>
                        <div class="input-group">
                          <input readonly type="text" class="form-control apikey-value" [value]="posId">
                          <span class="input-group-text cursor-pointer"><i matTooltip="Copy" (click)="copyText(posId)"
                              class="ri-file-copy-line"></i></span>
                        </div>
                      </div>
                      <div class="flex-shrink-0 hstack gap-2">
                        <button type="button" (click)="openPartnershipModal(partnerModal)" class="btn btn-info">
                          <i class="ri-add-line align-bottom me-1"></i> {{ 'COMMON.INVITE' | translate }}</button>
                      </div>
                    </div>
                  </div>
                  <div class="card-body pt-0">
                    <div class="table-responsive table-card mb-0">
                      <table class="table align-middle custom-datatable">
                        <thead>
                          <tr class="bg-light text-muted text-uppercase">
                            <th>{{'COMMON.TITLE' | translate }}</th>
                            <th>{{'COMMON.EMAIL' | translate }}</th>
                            <th>{{'MODULES.WEBSITE.SUBTITLE' | translate }}</th>
                            <th>{{'COMMON.PHONE' | translate }}</th>
                            <th>{{'COMMON.ACTIONS' | translate }}</th>
                          </tr>
                        </thead>
                        <tbody
                          *ngIf="((loadingPartnership$ | async) === false || null || undefined) && (partnership$ | async)?.length">
                          <tr *ngFor="let item of partnership$ | async" id="o_{{item?.id}}">
                            <td>
                              <div class="d-flex cursor-pointer align-items-center">
                                <div class="flex-shrink-0">
                                  <div class="avatar-sm bg-light p-1 rounded-circle"
                                    *ngIf="item?.partner?.pos?.picture?.baseUrl">
                                    <img
                                      [src]="item?.partner?.pos?.picture?.baseUrl + '/' + item?.partner?.pos?.picture?.path"
                                      class="img-fluid h-100 rounded-circle">
                                  </div>
                                  <div class="avatar-sm bg-light rounded-circle p-1"
                                    *ngIf="!item?.partner?.pos?.picture?.baseUrl">
                                    <div class="avatar-title bg-soft-success text-success rounded-circle fs-13">
                                      {{item?.partner?.pos?.title?.charAt(0) || 'N'}}</div>
                                  </div>
                                </div>
                                <div class="flex-grow-1 cursor-pointer fw-medium link-primary ms-2 name">
                                  {{item?.partner?.pos?.title?.length > 15 ?
                                  item?.partner?.pos?.title?.substr(0,15) + '...' : item?.partner?.pos?.title}}
                                </div>
                              </div>
                            </td>
                            <td>
                              {{item?.partner?.pos?.email}}
                            </td>
                            <td>
                              {{item?.partner?.pos?.subtitle?.length > 60 ?
                              item?.partner?.pos?.subtitle?.substr(0,60) + '...' : item?.partner?.pos?.subtitle}}
                            </td>
                            <td>{{item?.partner?.pos?.phone?.[0]}}</td>
                            <td>
                              <ul class="list-inline hstack gap-2 mb-0">
                                <li class="list-inline-item edit" matTooltip="Delete" placement="top">
                                  <a (click)="openPartnerDeleteModal(deletePartnerModal, item)"
                                    href="javascript:void(0);" data-bs-toggle="modal"
                                    class="text-danger d-inline-block">
                                    <i class="ri-delete-bin-5-fill fs-16"></i>
                                  </a>
                                </li>
                              </ul>
                            </td>
                          </tr>
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <div
                    *ngIf="((loadingPartnership$ | async) === false || null || undefined) && (partnership$ | async)?.length"
                    class="px-3">
                    <div class="row justify-content-md-between align-items-md-center gy-2">
                      <div class="col col-sm-6">
                        <div class="dataTables_info mb-2" id="tickets-table_info" role="status" aria-live="polite">
                          {{'COMMON.SHOWING' | translate }} {{partnershipMarketplacePagination?.startIndex +
                          1}}–{{partnershipMarketplacePagination?.endIndex ===
                            partnershipMarketplacePagination?.length ? partnershipMarketplacePagination?.endIndex :
                            partnershipMarketplacePagination?.endIndex + 1}}
                          {{'COMMON.OF' | translate }}
                          {{partnershipMarketplacePagination?.length}} {{'COMMON.ENTRIES' | translate }}
                        </div>
                      </div>
                      <div class="col col-sm-6 mb-2">
                        <div class="text-sm-right float-end listjs-pagination">
                          <ngb-pagination [maxSize]="5" [collectionSize]="partnershipMarketplacePagination?.length"
                            [(page)]="page" (pageChange)="onPartnershipAdvertiserPageChange($event)"
                            [pageSize]="partnershipMarketplacePagination?.size">
                          </ngb-pagination>
                        </div>
                      </div>
                    </div>
                  </div>
                  <div id="noresult" class="py-4 mt-4 text-center"
                    *ngIf="(loadingPartnership$ | async) || (!(loadingPartnership$ | async) && !(partnership$ | async)?.length)">
                    <div *ngIf="loadingPartnership$ | async">
                      <lord-icon trigger="loop" style="width:72px;height:72px"
                        [colors]="'primary:' + primaryColor + ',secondary:' + secondaryColor"
                        src="https://cdn.lordicon.com/msoeawqm.json">
                      </lord-icon>
                      <h5 class="mt-4">{{'COMMON.LOADING' | translate }}</h5>
                    </div>
                    <div *ngIf="!(loadingPartnership$ | async) && !(partnership$ | async)?.length">
                      <lord-icon trigger="loop" style="width:72px;height:72px"
                        [colors]="'primary:' + primaryColor + ',secondary:' + secondaryColor"
                        src="https://cdn.lordicon.com/vlycxjwx.json">
                      </lord-icon>
                      <h5 class="mt-4">{{ 'COMMON.NO_RESULT' | translate }}</h5>
                    </div>
                  </div>
                </div>
              </ng-template>
            </li>
            <li [ngbNavItem]="8" class="nav-item">
              <a ngbNavLink class="nav-link" data-bs-toggle="tab" role="tab">
                <i class="far fa-envelope"></i>{{'COMMON.IMPORT' | translate}}
              </a>
              <ng-template ngbNavContent>
                <form [formGroup]="orderForm">
                  <div class="d-flex justify-content-between mb-3">
                    <div>
                      <div for="firstnameInput">{{'MODULES.SYSTEM.ENABLE' | translate }}</div>
                    </div>
                    <div class="flex-shrink-0 d-flex fs-18 gap-1">
                      <div class="form-check form-switch">
                        <input [checked]="orderSettings?.import?.enable" (change)="onChangeImport($event?.target?.checked)"
                          class="form-check-input" type="checkbox" role="switch" id="flexSwitchCheckDefault">
                      </div>
                    </div>
                  </div>
                  <div formGroupName="import" class="mb-3 col-lg-6">
                    <label for="email_id-field" class="form-label">{{'MENUITEMS.CUSTOMERENGAGEMENT.CAMPAIGN.URL' | translate}}</label>
                    <input type="text" id="email_id-field" class="form-control" placeholder="{{'MENUITEMS.CUSTOMERENGAGEMENT.CAMPAIGN.URL' | translate}}"
                      formControlName="url" />
                  </div>
                </form>
                <div class="col-lg-12 mt-5">
                  <div class="d-flex justify-content-end mt-3">
                    <button (click)="saveImport()" [disabled]="isUrlButtonDisabled" type="button"
                      class="btn btn-success">{{'COMMON.SAVE' | translate }}</button>
                  </div>
                </div>
              </ng-template>
            </li>
          </ul>
        </div>
        <div class="card-body p-4">
          <div class="tab-content">
            <div [ngbNavOutlet]="customNav"></div>
          </div>
        </div>
      </div>
    </div>
  </div>


  <ng-template #partnerModal role="document" let-modal>
    <div class="modal-header bg-soft-info p-3">
      <h5 class="modal-title" id="exampleModalLabel">{{'COMMON.INVITE_PARTNER' | translate }}</h5>
      <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="close-modal"
        (click)="modal.dismiss('Cross click')"></button>
    </div>
    <form [formGroup]="partnerForm">
      <div class="modal-body">
        <div formGroupName="partner" class="mb-3">
          <label for="email_id-field" class="form-label">{{'SHARED.PARTNER' | translate }}</label>
          <input type="text" id="email_id-field" class="form-control" placeholder="Enter pos Id"
            formControlName="pos" />
        </div>
      </div>
      <div class="modal-footer">
        <div class="hstack gap-2 justify-content-end">
          <button type="button" class="btn btn-light" data-bs-dismiss="modal"
            (click)="modal.close('Close click')">{{'COMMON.CLOSE' | translate }}</button>
          <button [disabled]="isPartnerButtonDisabled || partnerForm.invalid" type="button" (click)="invitePartner()"
            class="btn btn-success" id="add-btn">{{'COMMON.INVITE_PARTNER' | translate }}</button>
        </div>
      </div>
    </form>
  </ng-template>

  <ng-template #deletePartnerModal let-modal>
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="deleteRecord-close"
          (click)="modal.dismiss('Cross click')"></button>
      </div>
      <div class="modal-body">
        <div class="mt-2 text-center">
          <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop"
            colors="primary:#405189,secondary:#f06548" style="width:90px;height:90px"></lord-icon>
          <div class="mt-4 pt-2 fs-15 mx-4 mx-sm-5">
            <h4>{{'SHARED.CONFIRM_REMOVE_PARTNER' | translate}}</h4>
            <p class="text-muted mx-4 mb-0">
              {{'SHARED.DELETE_PARTNER_WARNING' | translate}}
            </p>
          </div>
        </div>
        <div class="d-flex gap-2 justify-content-center mt-4 mb-2">
          <button class="btn btn-link link-success fw-medium text-decoration-none" data-bs-dismiss="modal"
            (click)="modal.close('Close click')"><i class="ri-close-line me-1 align-middle"></i>
            {{ 'COMMON.CLOSE' | translate }}</button>
          <button type="button" class="btn w-sm btn-danger " id="delete-product" (click)="deletePartnershipNetwork()"
            (click)="modal.close('Close click')">{{'COMMON.YES_DELETE_IT' | translate }}</button>
        </div>
      </div>
    </div>
  </ng-template>

  <ng-template #deleteModal let-modal>
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close" id="deleteRecord-close"
          (click)="modal.dismiss('Cross click')"></button>
      </div>
      <div class="modal-body">
        <div class="mt-2 text-center">
          <lord-icon src="https://cdn.lordicon.com/gsqxdxog.json" trigger="loop"
            colors="primary:#405189,secondary:#f06548" style="width:90px;height:90px"></lord-icon>
          <div class="mt-4 pt-2 fs-15 mx-4 mx-sm-5">
            <h4>{{ 'COMMON.ARE_YOU_SURE_DELETE' | translate }}</h4>
            <p class="text-muted mx-4 mb-0">{{ 'COMMON.DELETE_WARNING' | translate }}</p>
          </div>
        </div>
        <div class="d-flex gap-2 justify-content-center mt-4 mb-2">
          <button class="btn btn-link link-success fw-medium text-decoration-none" data-bs-dismiss="modal"
            (click)="modal.close('Close click')">
            <i class="ri-close-line me-1 align-middle"></i>{{ 'COMMON.CLOSE' | translate }}
          </button>
          <button type="button" class="btn w-sm btn-danger" id="delete-product" (click)="deleteItem()">
            {{ 'COMMON.YES_DELETE_IT' | translate }}
          </button>
        </div>
      </div>
    </div>
  </ng-template>

</ng-container>
<div *ngIf="navigating$ | async" class="vh-100 py-4 text-center" fxLayout="column" fxLayoutAlign="center center"
  fxLayoutGap="1rem">
  <div>
    <lord-icon trigger="loop" style="width:72px;height:72px"
      [colors]="'primary:' + primaryColor + ',secondary:' + secondaryColor"
      src="https://cdn.lordicon.com/msoeawqm.json">
    </lord-icon>
  </div>
  <div class="mt-4">
    <h5>{{'COMMON.LOADING' | translate }}</h5>
  </div>
</div>
